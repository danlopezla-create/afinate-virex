---
/**
 * SocialAuthButtons - Social authentication buttons with divider
 *
 * @description
 * Displays social login/signup buttons for Google and Microsoft with a divider line.
 * Supports both login and register variants with customizable text and URLs.
 * Buttons are displayed only when their respective URLs are provided.
 */
import { Icon } from 'astro-icon/components';

interface Props {
  /** Text to display in the divider */
  dividerText?: string;
  /** Google OAuth URL (shows button if provided or defaults to #) */
  googleUrl?: string;
  /** Microsoft OAuth URL (shows button if provided or defaults to #) */
  microsoftUrl?: string;
  /** Variant for button styling/text */
  variant?: 'login' | 'register';
}

const {
  dividerText = 'O continuar con',
  googleUrl = '#',
  microsoftUrl = '/auth/microsoft',
  variant = 'login',
} = Astro.props;

const googleLabel = variant === 'register' ? 'Registrarse con Google' : 'Continuar con Google';
const microsoftLabel = variant === 'register' ? 'Registrarse con Microsoft' : 'Continuar con Microsoft';
---

<div class="mt-6">
  <!-- Divider -->
  <div class="relative">
    <div class="absolute inset-0 flex items-center">
      <div class="w-full border-t border-border"></div>
    </div>
    <div class="relative flex justify-center text-sm">
      <span class="px-4 bg-surface text-text-muted">{dividerText}</span>
    </div>
  </div>

  <!-- Social buttons -->
  <div class="mt-6 grid grid-cols-2 gap-4">
    <a
      href={googleUrl}
      class="flex items-center justify-center gap-2 px-4 py-3 rounded-md border border-border bg-background text-text hover:bg-surface transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background"
      aria-label={googleLabel}
    >
      <Icon name="simple-icons:google" class="w-5 h-5" aria-hidden="true" />
      <span class="text-sm font-medium">Google</span>
    </a>
    <a
      href={microsoftUrl}
      class="flex items-center justify-center gap-2 px-4 py-3 rounded-md border border-border bg-background text-text hover:bg-surface transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background"
      aria-label={microsoftLabel}
    >
      <Icon name="simple-icons:microsoft" class="w-5 h-5" aria-hidden="true" />
      <span class="text-sm font-medium">Microsoft</span>
    </a>
  </div>
</div>
