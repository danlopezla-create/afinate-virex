---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import PageHeader from '@sections/content/PageHeader.astro';
import SecurityBadges from '@sections/pricing/SecurityBadges.astro';
import ValuesSection from '@sections/team/ValuesSection.astro';
import FAQSection from '@sections/content/FAQSection.astro';
import { Icon } from 'astro-icon/components';
import { siteConfig } from '@/config';

const certifications = [
  {
    name: 'Base de datos (RLS)',
    icon: 'lucide:database',
    description:
      'Base de datos con Row Level Security para que cada cliente acceda solo a sus datos. Políticas de acceso definidas por aplicación.',
  },
  {
    name: 'SSL y CDN',
    icon: 'lucide:shield',
    description:
      'Dominio protegido con DNS, certificados SSL y CDN. Tráfico web cifrado y protección frente a amenazas comunes.',
  },
  {
    name: 'Pasarela de pago',
    icon: 'lucide:credit-card',
    description:
      'Pasarela de pago que cumple estándares de seguridad para transacciones. No almacenamos datos de tarjetas.',
  },
  {
    name: 'Backups y disponibilidad',
    icon: 'lucide:refresh-cw',
    description:
      'Copias de seguridad en servidor y almacenamiento en base de datos. Infraestructura preparada para recuperación.',
  },
];

const securityFeatures = [
  {
    icon: 'lucide:lock',
    title: 'Cifrado en tránsito',
    description:
      'Toda la comunicación con la web y los servicios se realiza por HTTPS (TLS). Los datos no viajan en claro.',
  },
  {
    icon: 'lucide:key',
    title: 'Control de acceso a datos',
    description:
      'La base de datos utiliza Row Level Security (RLS). Las consultas se filtran por usuario para que cada cliente solo vea su propia información.',
  },
  {
    icon: 'lucide:server',
    title: 'Infraestructura aislada',
    description:
      'Backend, automatizaciones y panel de control se ejecutan en servidor dedicado con contenedores y VPN, reduciendo superficie de exposición.',
  },
  {
    icon: 'lucide:file-check',
    title: 'Procesamiento de documentos con IA',
    description:
      'Los documentos que procesa el equipo de IA (Lucía, Sofía, María) se envían a proveedores con prácticas de seguridad y privacidad alineadas al uso empresarial.',
  },
  {
    icon: 'lucide:message-circle',
    title: 'Canal WhatsApp oficial',
    description:
      'Conexión con la API de WhatsApp de Meta para atención al cliente, con uso conforme a sus políticas de seguridad y privacidad.',
  },
  {
    icon: 'lucide:wallet',
    title: 'Pasarela de pago',
    description:
      'Los pagos se procesan mediante una pasarela que cumple estándares de la industria. No almacenamos datos sensibles de medios de pago.',
  },
];

const securityFAQs = [
  {
    question: '¿Dónde se almacenan los datos de mi empresa?',
    answer:
      'Los datos de negocio y documentos se almacenan en base de datos con políticas RLS. La infraestructura de procesos y el panel de control corren en servidor dedicado con backups configurados.',
  },
  {
    question: '¿Cómo se protegen los datos en tránsito?',
    answer:
      'Todo el tráfico entre tu navegador y nuestros servicios utiliza HTTPS (TLS). El dominio está protegido con SSL y una capa adicional de protección.',
  },
  {
    question: '¿Quién puede ver la información de mi cuenta?',
    answer:
      'Solo tu organización tiene acceso a sus propios datos gracias a Row Level Security en la base de datos. afinate accede únicamente cuando es necesario para soporte o mantenimiento, con criterios internos de confidencialidad.',
  },
  {
    question: '¿Cómo reportar una vulnerabilidad o incidente?',
    answer:
      'Puedes reportar vulnerabilidades o incidentes de seguridad a afinateia@gmail.com. Revisaremos cada reporte y te responderemos en un plazo razonable.',
  },
];
---

<MarketingLayout
  title={`Seguridad - ${siteConfig.name}`}
  description="Cómo afinate protege tus datos: stack técnico, cifrado, control de acceso y buenas prácticas."
>
  <PageHeader
    title="Seguridad"
    subtitle="Protegemos tus datos con un stack moderno: base de datos con control de acceso, cifrado en tránsito, pagos seguros e infraestructura aislada."
  />

  <SecurityBadges
    title="Garantías técnicas y cumplimiento"
    subtitle="Pilares de nuestra arquitectura para la seguridad y privacidad de la información."
    badges={certifications}
    variant="cards"
    background="muted"
  />

  <ValuesSection
    title="Cómo te protegemos"
    subtitle="Medidas de seguridad integradas en la plataforma y en la operación."
    items={securityFeatures}
    variant="with-icon"
    columns={2}
    background="default"
  />

  <section class="py-section bg-surface">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div>
          <h2 id="stack-tecnico" class="text-2xl sm:text-3xl font-bold text-text scroll-mt-24">Stack técnico y buenas prácticas</h2>
          <div class="mt-6 space-y-4 text-text-muted">
            <p>
              La web se sirve de forma segura. Los datos y la lógica de negocio dependen de una base de datos
              con RLS, almacenamiento y backups. La capa de pago la gestiona una pasarela de pago;
              el procesamiento de documentos con IA utiliza APIs con compromisos de privacidad.
            </p>
            <p>
              Las automatizaciones, el panel de control y la conexión con mensajería oficial se ejecutan en
              servidor dedicado gestionado con contenedores, accesible por VPN para reducir riesgos. El dominio
              está protegido con DNS, SSL y CDN.
            </p>
            <p>
              Nos comprometemos a mantener actualizado el stack, aplicar parches de seguridad y revisar el acceso
              a los sistemas. Si necesitas documentación específica o un cuestionario de seguridad, contáctanos.
            </p>
          </div>
          <div class="mt-8">
            <a
              href="/contact"
              class="inline-flex items-center gap-2 px-6 py-3 rounded-md bg-primary text-primary-foreground font-medium hover:bg-primary-dark transition-colors"
            >
              <Icon name="lucide:mail" class="w-5 h-5" />
              Solicitar información de seguridad
            </a>
          </div>
        </div>
        <div class="bg-background rounded-xl border border-border p-8">
          <h3 class="font-semibold text-text mb-6">Contacto de seguridad</h3>
          <div class="space-y-4">
            <div>
              <p class="text-sm text-text-muted">Reportar vulnerabilidad o incidente</p>
              <a href="mailto:afinateia@gmail.com" class="text-primary hover:underline">
                afinateia@gmail.com
              </a>
            </div>
            <div>
              <p class="text-sm text-text-muted">Cuestionarios o documentación</p>
              <a href="mailto:afinateia@gmail.com" class="text-primary hover:underline">
                afinateia@gmail.com
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <FAQSection
    title="Preguntas frecuentes de seguridad"
    subtitle="Respuestas sobre almacenamiento, cifrado y prácticas de afinate."
    faqs={securityFAQs}
    variant="accordion"
    background="default"
  />

</MarketingLayout>
