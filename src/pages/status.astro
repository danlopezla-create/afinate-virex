---
import MarketingLayout from '@/layouts/MarketingLayout.astro';
import PageHeader from '@sections/content/PageHeader.astro';
import StatusOverview from '@sections/product/StatusOverview.astro';
import { siteConfig } from '@/config';

// Stack técnico de afinate: servicios que pueden monitorearse
const services = [
  { name: 'Sitio web y app', status: 'operational' as const },
  { name: 'API y backend', status: 'operational' as const },
  { name: 'Procesamiento de documentos (IA)', status: 'operational' as const },
  { name: 'Base de datos (libro mayor, usuarios)', status: 'operational' as const },
  { name: 'Pasarela de pago (Wompi)', status: 'operational' as const },
  { name: 'Canal WhatsApp (atención y documentos)', status: 'operational' as const },
  { name: 'SSL y DNS', status: 'operational' as const },
];

// Historial de incidencias (ejemplo; en producción conectar con sistema real)
const recentIncidents: Array<{
  date: string;
  title: string;
  status: 'resolved' | 'investigating' | 'identified' | 'monitoring';
  description: string;
  updates: Array<{ time: string; message: string }>;
}> = [];
---

<MarketingLayout
  title={`Estado del sistema - ${siteConfig.name}`}
  description={`Estado actual de los servicios de ${siteConfig.name}: web, API, procesamiento con IA, base de datos, pagos y WhatsApp.`}
>
  <PageHeader
    title="Estado del sistema"
    subtitle={`Estado operativo del stack técnico de ${siteConfig.name}: aplicación, API, IA, base de datos, pagos y canal WhatsApp.`}
  />

  <StatusOverview
    services={services}
    incidents={recentIncidents}
    twitterUrl={siteConfig.social?.x}
    supportEmail={siteConfig.contact?.supportEmail}
    background="default"
    lang="es"
  />
</MarketingLayout>
